<!doctype html>
 <html{% if settings.use_boxed %} id="tt-boxed"{% endif %} class="no-js{% if settings.use_rtl %} rtlstyle{% endif %}" lang="{{ shop.locale }}">
<head>
  <!-- Basic page needs ================================================== -->
  <meta charset="utf-8">
  <!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><![endif]-->
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="theme-color" content="{{ settings.color_base }}">
  <meta name="keywords" content="{{ "general.meta.keywords" | t }}" />
  <meta name="author" content="{{ "general.meta.author" | t }}">
  <link rel="canonical" href="{{ canonical_url }}">

  {%- if settings.favicon != blank and settings.use_favicon -%}
  	<link rel="shortcut icon" href="{{ settings.favicon | img_url: '32x32' }}" type="image/png">
  {%- endif -%}

  <!-- Title and description ================================================== -->
  {%- capture seo_title -%}
    {{ page_title }}
    {%- if current_tags -%}
      {%- assign meta_tags = current_tags | join: ', ' -%} &ndash; {{ 'general.meta.tags' | t: tags: meta_tags -}}
    {%- endif -%}
    {%- if current_page != 1 -%}
      &ndash; {{ 'general.meta.page' | t: page: current_page }}
    {%- endif -%}
    {%- unless page_title contains shop.name -%}
      &ndash; {{ shop.name }}
    {%- endunless -%}
  {%- endcapture -%}
  <title>{{ seo_title }}</title>

  {%- if page_description -%}
  <meta name="description" content="{{ page_description | escape }}">
  {%- endif -%}

  {%- if settings.use_countdown_timezone -%}<meta name="timezone" content="{{ settings.countdown_timezone }}">{%- endif -%}
  
  {%- include 'social-meta-tags' -%}

  {%- comment -%} === CRITICAL INLINE (no bloquear) === {%- endcomment -%}
<style id="critical-css">
  /* Aísla layouts del contenido principal y permite paint parcial */
  #tt-pageContent{ 
    contain: layout paint style;
    content-visibility: auto;
    contain-intrinsic-size: 1000px;
  }

  /* ====== RESET + BOX-SIZING ====== */
  *, *::before, *::after { box-sizing: border-box; }

  /* ====== HTML / BODY ====== */
  html { line-height: 1.15; -webkit-text-size-adjust:100%; }
  body {
    margin: 0;
    font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,system-ui,Arial,sans-serif;
    color: #111;
    background-color: #fff;
    overflow-x: hidden;
  }

  /* ====== TIPOGRAFÍA BASE ====== */
  h1,h2,h3,h4,h5,h6 { margin: 0 0 .5rem; font-weight: 600; line-height: 1.2; }
  p { margin: 0 0 1rem; }
  b,strong { font-weight: 700; }
  a { color: #d7bd60; text-decoration: none; }
  a:hover { text-decoration: underline; }
  img { max-width: 100%; height: auto; border-style: none; vertical-align: middle; }

  /* ====== CONTENEDOR + GRID MÍNIMO ====== */
  .container { width:100%; margin:0 auto; padding: 0 12px; }
  @media (min-width: 576px){ .container{ max-width: 540px; } }
  @media (min-width: 768px){ .container{ max-width: 720px; } }
  @media (min-width:1024px){ .container{ max-width: 960px; } }
  @media (min-width:1200px){ .container{ max-width:1140px; } }

  .row { display:flex; flex-wrap:wrap; margin-right:-12px; margin-left:-12px; }
  .col-6 { flex:0 0 50%; max-width:50%; padding:0 12px; }
  .col-12 { flex:0 0 100%; max-width:100%; padding:0 12px; }

  /* ====== BOTONES ====== */
  .btn { display:inline-block; padding:.6rem 1.1rem; font-weight:600; line-height:1.2; border:1px solid transparent; border-radius:.25rem; cursor:pointer; text-align:center; }
  .btn:focus { outline: none; }
  .btn-primary { background:#d7bd60; border-color:#d7bd60; color:#111; }
  .btn-primary:hover { filter: brightness(.95); }
  .btn-outline { background:transparent; border-color:#d7bd60; color:#d7bd60; }
  .btn-outline:hover { background:#d7bd60; color:#111; }

  /* ====== CABECERA ====== */
  header, .tt-stuck-nav { background:#fff; color:#111; }
  .header-top { font-size:.9rem; background:#f7f7f7; color:#333; }
  .header-top a { color: inherit; text-decoration:none; }

  .tt-header-holder { position:relative; z-index:10; }
  .tt-logo img { display:block; height:auto; max-height:56px; }

  .tt-desctop-menu { display:flex; align-items:center; gap: 20px; }
  .tt-desctop-menu a { color:#111; font-weight:500; }
  .tt-desctop-menu a:hover { color:#d7bd60; }

  /* ====== BUSCADOR HEADER ====== */
  .tt-search { position:relative; }
  .tt-search .tt-dropdown-menu { position:relative; }
  .tt-search .tt-dropdown-menu form { display:flex; align-items:center; gap:8px; width:100%; }
  .tt-search .tt-search-input {
    width: calc(80% - 40px); min-height: 40px; padding: 8px 12px;
    border:1px solid #ddd; border-radius:4px;
  }
  .tt-search button[type="submit"] {
    min-height: 40px; padding: 0 14px; border: 1px solid #d7bd60; border-radius:4px;
    background:#d7bd60; color:#111; font-weight:600;
  }

  /* ====== NAV PEGADA ====== */
  .tt-stuck-nav { position: sticky; top: 0; left:0; right:0; box-shadow: 0 2px 8px rgba(0,0,0,.05); }

  /* ====== HERO ====== */
  .hero, .tt-promo-fullwidth, .banner--hero {
    position:relative; display:flex; align-items:center; min-height: 48vh;
    background-position:center; background-size:cover; background-repeat:no-repeat;
  }
  .hero .container, .tt-promo-fullwidth .container { padding-top:24px; padding-bottom:24px; }
  .hero h1 { font-size: clamp(28px, 4vw, 44px); margin-bottom: .5rem; }
  .hero p.lead { font-size: clamp(16px, 2vw, 20px); color:#444; margin-bottom: 1rem; }

  /* ====== PRECIO ====== */
  span.money { color:#111; font-weight:700; }
  span.moneyCompare { color:#888; text-decoration: line-through; }

  /* ====== CLS helpers ====== */
  [hidden]{ display:none !important; }
  img[loading="lazy"] { min-height:1px; }
  .lazy-image { display:block; min-height: 1px; }
  .placeholder-rect { background:#f1f1f1; }

  @media (max-width: 991px){
    .tt-desctop-menu { display:none; }
    .tt-logo img { max-height:48px; }
    .hero, .tt-promo-fullwidth, .banner--hero { min-height: 40vh; }
  }

  .boost-sd__product-price-content, .price, .tt-price { 
    display: inline-block; min-height: 1.4em; min-width: 4.5ch;
  }

  .boost-sd__format-currency.is-zero{ visibility: hidden; }
</style>

{%- comment -%} Preconnect: solo lo esencial (≤4) {%- endcomment -%}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

{%- comment -%} Google Fonts CSS2 no bloqueante {%- endcomment -%}
<link rel="preload" as="style"
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&display=swap"
      onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&display=swap"></noscript>

{%- comment -%} CSS base (estructura) con preload + onload {%- endcomment -%}
<link rel="preload" as="style" href="{{ 'core.css' | asset_url }}" onload="this.onload=null;this.rel='stylesheet'">
<link rel="preload" as="style" href="{{ 'grid.css' | asset_url }}" onload="this.onload=null;this.rel='stylesheet'">
<noscript>
  <link rel="stylesheet" href="{{ 'core.css'  | asset_url }}">
  <link rel="stylesheet" href="{{ 'grid.css'  | asset_url }}">
</noscript>

{%- comment -%} CSS no crítico → print hack {%- endcomment -%}
<link rel="stylesheet" href="{{ 'components.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'pages.css'      | asset_url }}" media="print" onload="this.media='all'">
<noscript>
  <link rel="stylesheet" href="{{ 'components.css' | asset_url }}">
  <link rel="stylesheet" href="{{ 'pages.css'      | asset_url }}">
</noscript>

{%- if settings.use_rtl -%}
<link rel="stylesheet" href="{{ 'style-rtl.css' | asset_url }}" media="print" onload="this.media='all'">
<noscript><link rel="stylesheet" href="{{ 'style-rtl.css' | asset_url }}"></noscript>
{%- endif -%}

<!-- jQuery local (defer) -->
<script src="{{ 'jquery.min.js' | asset_url }}" defer></script>

<!-- Shopify injects (apps, storefront, etc.) -->
{% render 'boost-sd-fallback' %}
{{ content_for_header }}

{%- unless settings.show_emptyreview -%}
<style>[data-rating="0.0"]{ display:none !important; }</style>
{%- endunless -%}

<!-- ======= Google Tag Manager: mover a idle para reducir TBT ======= -->
<script>
(function(w,d,s,l,i){
  function start(){
    w[l]=w[l]||[]; w[l].push({'gtm.start': new Date().getTime(), event:'gtm.js'});
    var f=d.getElementsByTagName(s)[0], j=d.createElement(s), dl=l!='dataLayer' ? '&l='+l : '';
    j.async=1; j.defer=1; j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
    f.parentNode.insertBefore(j,f);
  }
  if ('requestIdleCallback' in window) requestIdleCallback(start, {timeout:1500});
  else setTimeout(start, 1000);
})(window,document,'script','dataLayer','GTM-M9QVPXNJ');
</script>
<!-- ======= /GTM ======= -->

<style>
  button.slick-arrow { z-index: 99999 !important; }
  button.tt-btn-zomm.tt-top-right.tt-btn-zomm-product-page { display: none; }
</style>

</head>
<body class="page{{ template }}"
      {% if template contains '404' %}id="template404"{% elsif settings.use_scale_product_image %}
      id="same_product_height"{% if settings.notsamewidth %} data-type="not_same_width"{% endif %}{% endif %}
      {% if request.design_mode %} data-supportcode="{{ settings.supportcode }}"{% endif %}>

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M9QVPXNJ" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  {%- if settings.show_helper -%}{%- section "show-helper" -%}{%- endif -%}
  {%- if settings.show_preloader -%}{%- include "main-loader" -%}{%- endif -%}

  {%- if settings.header_design == "header_type_1" -%}
    {%- capture var_header -%}{%- section "header-template" -%}{%- endcapture -%}
    {{ var_header }}
  {%- else -%}
    {%- if settings.header_design == "header_type_2" -%}
      {%- capture var_header -%}{% section 'header-template-2' %}{%- endcapture -%}
    {%- elsif settings.header_design == "header_type_3" -%}
      {%- capture var_header -%}{% section 'header-template-3' %}{%- endcapture -%}
    {%- elsif settings.header_design == "header_type_4" -%}
      {%- capture var_header -%}{% section 'header-template-4' %}{%- endcapture -%}
    {%- elsif settings.header_design == "header_type_5" -%}
      {%- capture var_header -%}{% section 'header-template-5' %}{%- endcapture -%}
    {%- endif -%}
    {%- if var_header contains '<div class="CATEGORIE MOBILE"></div>' -%}
      {%- capture var_categorie_button -%}{% if settings.header_design == "header_type_4" %}{% section 'categorie-button-icons-menu' %}{% else %}{% section 'categorie-button' %}{% endif %}{%- endcapture -%}
      {{ var_categorie_button | split:"[PARTMOBILE]" | first | append: "</div>" }}
      {%- assign var_categorie_mobile = var_categorie_button | split:"[PARTMOBILE]" | last | split: "[/PARTMOBILE]" | first -%}
      {%- assign var_categorie_button = var_categorie_button | split:"[PART]" | last | split: "[/PART]" | first -%}
      {{ var_header | replace: '<div class="CATEGORIE MOBILE"></div>', var_categorie_mobile | replace: "[CATEGORIE, PLEASE SAVE PAGE]", var_categorie_button }}
    {%- else -%}
      {{ var_header }}
    {%- endif -%}
  {%- endif -%}
  
  {% if settings.show_breadcrumbs %}{%- include "breadcrumb" -%}{% endif %}
  <div id="tt-pageContent"{% if settings.show_unavailable_variants %} class="show_unavailable_variants"{% endif %}>
    {{ content_for_layout }}
  </div>

  {% section 'icon-banners-footer' %}
  {%- assign blockinuse = '' -%}
  {%- for i in (1..5) -%}
    {%- assign footer_position = 'footer_position_' | append: i -%}{%- assign csection = settings[footer_position] -%}
    {%- if csection != 'none' -%}
      {%- unless blockinuse contains csection -%}{%- assign blockinuse = blockinuse | append: csection | append: '%%' -%}
        {%- case csection -%}
          {%- when "footer-section-subscribe" -%}{%- section "footer-section-subscribe" -%}
          {%- when "footer-section-blurbs" -%}{%- section "footer-section-blurbs" -%}
          {%- when "footer-section-text_plus_image_vertical" -%}{%- section "footer-section-text_plus_image_vertical" -%}
          {%- when "footer-section-iconbanners" -%}{%- section "footer-section-iconbanners" -%}
          {%- else -%}{%- section "footer-template" -%}
        {%- endcase -%}
      {%- endunless -%}
    {%- endif -%}
  {%- endfor -%}

  {%- if settings.show_footer_instagram_section -%}
    {%- section "footer-section-instagram" -%}
  {%- endif -%}
  {%- if settings.show_back_to_top_button -%}<a href="#" class="tt-back-to-top">{{ 'general.general.to_top_button' | t }}</a>{% endif -%}
  {%- if settings.product_item_show_quickview -%}
    {%- if content_for_layout contains 'data-target="#ModalquickView"' or content_for_layout contains "index_sectiontabs" or template contains "product" -%}{%- include "modal-quickview" -%}
    {%- elsif template == "index" and settings.home_page_layout == 'home-page_layout-2' -%}{%- include "modal-quickview" -%}
    {%- endif -%}
  {%- endif -%}
  {%- if settings.show_addtocart_popup -%}{%- include "modal-addtocart" -%}{%- endif -%}
  {%- include "preloader-ajax" -%}

  <script>
    var theme = {},
		shop_url = '{{ shop.url }}',
    	money_format = '{{ shop.money_format }}',
        color_with_border = '{{ settings.shopby_color_filter_border }}' || 'empty',
        colors_value = '{{ ',' | append: settings.product_colors | strip_newlines | downcase | append: ',' }}',
    	texture_obj = function(){
      {%- assign str = '{' -%}
      {%- for i in (1..settings.image_options_count) -%}
      {%- assign key = 'filter_color' | append:i -%}
      {%- unless settings[key] == blank -%}
      {%- assign image = 'filter_color' | append:i | append:'.png' -%}
      {%- assign image = image | asset_url -%}
      {%- if str.size > 1 -%}{%- assign str = str | append: ',' -%}{%- endif -%}
      {%- assign str = str | append:'"' | append: settings[key] | append:'"' | append: ':' | append:'"' | append: image | append:'"' -%}
      {%- endunless -%}
      {%- endfor -%}
      {%- assign str = str | append: '}' -%}
      return JSON.parse('{{ str }}');
    }
    texture_obj = texture_obj();

    var wokiee_app = {
      url: '{{ shop.metafields.ollistsapp.appurl }}',
      loader_text: '{{ "wishlist.buttons_text.tooltop_load_text" | t }}',
      main_info: {
        customerid: '{{ customer.id }}',
        iid: '{{ shop.metafields.ollistsapp.iid }}',
        shop: '{{ shop.permanent_domain }}',
      	domain: '{{ shop.domain }}',
      	lic: '{{ settings.license }}',
      }
    };

    var set_day = '{{ "general.countdown.day" | t | strip_newlines }}',
        set_hour = '{{ "general.countdown.hour" | t | strip_newlines }}',
        set_minute = '{{ "general.countdown.minute" | t | strip_newlines }}',
        set_second = '{{ "general.countdown.second" | t | strip_newlines }}';
    
    var addtocart_text = '{{ "products.general.add_to_cart_html" | t | strip_newlines }}',
    	unavailable_text = '{{ "products.general.unavailable_html" | t | strip_newlines }}',
        addedhtml_text = '{{ "products.general.added_html" | t | strip_newlines }}',
        errorhtml_text = '{{ "products.general.error_html" | t | strip_newlines }}',
        preorderhtml_text = '{{ "products.general.preorder_html" | t | strip_newlines }}',
        wait_text = '{{ "products.general.wait_html" | t | strip_newlines }}',
        b_close = '{{ "general.menu.button_close" | t | strip_newlines }}',
        b_back = '{{ "general.menu.button_back" | t | strip_newlines }}',
        seeallresults = '{{ "general.search.see_all_results" | t | strip_newlines }}';
        
    var small_image = '{{ 'dummy.png' | asset_url }}';
  </script>
  
  {%- include "include_js" -%}
  {%- include "currencies" -%}
  {%- include 'modal-newsletter' -%}
  {%- include "modal-subscribe_message" -%}
  {%- include 'modal-wishlist-alert' -%}
  {%- section "promo-fixed" -%}

  {%- comment -%} ====== Slider Revolution: cargar SOLO si está presente en la página ====== {%- endcomment -%}
  {%- assign uses_rev = false -%}
  {%- if content_for_layout contains 'rev_slider' or content_for_layout contains 'tp-revslider-mainul' -%}{% assign uses_rev = true %}{%- endif -%}
  {%- if template == 'index' and uses_rev -%}
    <script defer src="{{ 'jquery.themepunch.revolution_full.min.js' | asset_url }}"></script>
    {%- comment -%} Si tienes CSS propio de Revolution, hazlo no-bloqueante igual que el resto {%- endcomment -%}
    {%- if 'revolution.css' | asset_url -%}
      <link rel="preload" as="style" href="{{ 'revolution.css' | asset_url }}" onload="this.onload=null;this.rel='stylesheet'">
      <noscript><link rel="stylesheet" href="{{ 'revolution.css' | asset_url }}"></noscript>
    {%- endif -%}
  {%- endif -%}

  {%- if settings.all_links_is_external or settings.menu_links_is_external or settings.external_links_is_external -%}
  <script defer>
    window.addEventListener('DOMContentLoaded', function() {
      {% if settings.all_links_is_external %}
      document.querySelectorAll('a').forEach(a => a.setAttribute('target','_blank'));
      {% endif %}
      {% if settings.menu_links_is_external %}
      document.querySelectorAll('.tt-desctop-menu a, .panel-menu a').forEach(a => a.setAttribute('target','_blank'));
      {% endif %}
      {% if settings.external_links_is_external %}
      document.querySelectorAll('a[href^="http"]').forEach(a => a.setAttribute('target','_blank'));
      {% endif %}
    });
  </script>
  {%- endif -%}

  {{ settings.some_code_field }}

  <!-- ====== JS de clientes Shopify SOLO en vistas de cliente, defer ====== -->
  {%- if template contains 'customers' -%}
    {{ 'shopify_common.js' | shopify_asset_url | script_tag | replace: '<script ', '<script defer ' | remove: ' type="text/javascript"' }}
    {{ 'customer_area.js'  | shopify_asset_url | script_tag | replace: '<script ', '<script defer ' | remove: ' type="text/javascript"' }}
  {%- endif -%}

  <!-- ====== Script personalizado (Vanilla) ====== -->
  <script defer>
  (function(){
    function markZeroPrices(){
      document.querySelectorAll(".boost-sd__format-currency").forEach(function(el){
        var txt = (el.textContent || '').replace(/\s/g,'');
        if (txt === '$0' || txt === '$0.00' || txt === '$0,00') {
          el.classList.add('is-zero');
        }
      });
    }
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', markZeroPrices);
    } else { markZeroPrices(); }
    document.addEventListener('boost:updated', markZeroPrices);
  })();
  </script>

  <!-- ====== Loader de terceros (reduce TBT) ====== -->
  <script>
  (function(){
    function onIdle(fn){ 'requestIdleCallback' in window ? requestIdleCallback(fn,{timeout:3000}) : setTimeout(fn,1200); }
    function onFirstInput(fn){
      var done=false; function wrap(){ if(done) return; done=true; fn(); }
      ['pointerdown','keydown','wheel','touchstart'].forEach(function(e){ addEventListener(e, wrap, {once:true, passive:true}); });
      setTimeout(wrap, 4000); // fallback
    }
    function loadJS(src, attrs){
      return new Promise(function(res,rej){
        var s=document.createElement('script'); s.src=src; s.async=1; s.defer=1;
        if(attrs) for (var k in attrs) s.setAttribute(k, attrs[k]);
        s.onload=res; s.onerror=rej; document.head.appendChild(s);
      });
    }

    // Clarity → idle
    onIdle(function(){ loadJS('https://www.clarity.ms/tag/o8urjbd8xg'); });

    // Otros widgets → al primer input (descomenta los que uses)
    onFirstInput(function(){
      // Reputon
      // loadJS('https://cdn.gnw.reputon.com/assets/widget.js?shop={{ shop.permanent_domain }}');
      // SalesPop
      // loadJS('https://cdn.shopify.com/s/files/1/0000/0000/t/0/assets/salespop-widget.js');
      // Chaty
      // loadJS('https://cdn.chaty.app/pixel.js?id=SaFsvROS&shop={{ shop.permanent_domain }}');
      // Facebook Pixel (si no necesitas disparo inmediato)
      // loadJS('https://connect.facebook.net/en_US/fbevents.js');
    });
  })();
  </script>

  <!-- ====== Estilos inline (se conservan) ====== -->
  <style>
    span.new-price { color:#B21F1F !important; font-weight:800; font-size:16px !important; }
    span.boost-sd__format-currency { font-size:16px; font-weight:600; }
    span.boost-sd__product-price-content:nth-child(1) { color:#B21F1F !important; }
    .boost-sd__format-currency--price-compare { color:#000 !important; }
    span.old-price { color:#000 !important; }
    .tt-product-single-info .new-price { font-size:30px !important; color:#121212 !important; }
    .tt-product-single-info .tt-price .sale-price { color:#f8353e; margin-right:7px; font-weight:700; }
  </style>

</body>
</html>
